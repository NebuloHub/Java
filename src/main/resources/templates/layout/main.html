<!-- File: src/main/resources/templates/layout/main.html (CORRECTED) -->
<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:fragment="layout(pageTitle, content)"> <!-- <-- FRAGMENT DEFINITION MOVED AND FIXED -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Theme -->
    <link rel="stylesheet" th:href="@{/css/theme.css}">

    <!-- The pageTitle parameter is now used here -->
    <title th:text="${pageTitle} ?: 'NebuloHub'">NebuloHub</title>
</head>
<body class="d-flex flex-column min-vh-100">

<!-- Header Fragment -->
<div th:replace="~{layout/header :: header}"></div>

<!--
  THE 'content' PARAMETER (THE <main> BLOCK FROM THE
  CALLING PAGE) IS INSERTED HERE.
-->
<div th:replace="${content}"></div>

<!-- Footer Fragment -->
<div th:replace="~{layout/footer :: footer}"></div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>